<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Easy markdown in python scripts üêç | Hollie Johnson</title><meta name=keywords content="vscode,markdown,python"><meta name=description content="Markdown is a popular, lightweight markup language commonly used for text formatting (and used in this site). Whilst markdown can be written in a standalone file (for example, a README.md), it is also used in R Markdown (.Rmd) files and Jupyter (IPython) notebooks (.ipynb). In this blog post, we look at the advantages and disadvantages of notebooks and how we can use markdown directly in standard .py Python scripts.
As an aside, R Markdown has other advantages over plain markdown, such as being publishable into R bookdown format&mldr; But that&rsquo;s a blog post for another time!"><meta name=author content="Hollie"><link rel=canonical href=https://holliejohnson.github.io/posts/python-markdown/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://holliejohnson.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://holliejohnson.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://holliejohnson.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://holliejohnson.github.io/apple-touch-icon.png><link rel=mask-icon href=https://holliejohnson.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Easy markdown in python scripts üêç"><meta property="og:description" content="Markdown is a popular, lightweight markup language commonly used for text formatting (and used in this site). Whilst markdown can be written in a standalone file (for example, a README.md), it is also used in R Markdown (.Rmd) files and Jupyter (IPython) notebooks (.ipynb). In this blog post, we look at the advantages and disadvantages of notebooks and how we can use markdown directly in standard .py Python scripts.
As an aside, R Markdown has other advantages over plain markdown, such as being publishable into R bookdown format&mldr; But that&rsquo;s a blog post for another time!"><meta property="og:type" content="article"><meta property="og:url" content="https://holliejohnson.github.io/posts/python-markdown/"><meta property="og:image" content="https://holliejohnson.github.io/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-16T13:06:11+00:00"><meta property="article:modified_time" content="2022-11-16T13:06:11+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://holliejohnson.github.io/papermod-cover.png"><meta name=twitter:title content="Easy markdown in python scripts üêç"><meta name=twitter:description content="Markdown is a popular, lightweight markup language commonly used for text formatting (and used in this site). Whilst markdown can be written in a standalone file (for example, a README.md), it is also used in R Markdown (.Rmd) files and Jupyter (IPython) notebooks (.ipynb). In this blog post, we look at the advantages and disadvantages of notebooks and how we can use markdown directly in standard .py Python scripts.
As an aside, R Markdown has other advantages over plain markdown, such as being publishable into R bookdown format&mldr; But that&rsquo;s a blog post for another time!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://holliejohnson.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Easy markdown in python scripts üêç","item":"https://holliejohnson.github.io/posts/python-markdown/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Easy markdown in python scripts üêç","name":"Easy markdown in python scripts üêç","description":"Markdown is a popular, lightweight markup language commonly used for text formatting (and used in this site). Whilst markdown can be written in a standalone file (for example, a README.md), it is also used in R Markdown (.Rmd) files and Jupyter (IPython) notebooks (.ipynb). In this blog post, we look at the advantages and disadvantages of notebooks and how we can use markdown directly in standard .py Python scripts.\nAs an aside, R Markdown has other advantages over plain markdown, such as being publishable into R bookdown format\u0026hellip; But that\u0026rsquo;s a blog post for another time!","keywords":["vscode","markdown","python"],"articleBody":"Markdown is a popular, lightweight markup language commonly used for text formatting (and used in this site). Whilst markdown can be written in a standalone file (for example, a README.md), it is also used in R Markdown (.Rmd) files and Jupyter (IPython) notebooks (.ipynb). In this blog post, we look at the advantages and disadvantages of notebooks and how we can use markdown directly in standard .py Python scripts.\nAs an aside, R Markdown has other advantages over plain markdown, such as being publishable into R bookdown format‚Ä¶ But that‚Äôs a blog post for another time!\nIPython or Jupyter?\nIPython refers primarily to the interactive shell on which notebooks themselves run. As of 2014, several language-agnostic elements of the IPython ecosystem including notebooks were relaunched as Project Jupyter. So sometimes we see Jupyter notebooks still referred to as IPython notebooks - these names refer to the same tool (and they still use the same .ipynb file extension)!\nJupyter (.ipynb) notebooks Jupyter notebooks are a very popular way of presenting and developing Python code, particularly in exploratory data analysis and educational settings; both kaggle and Google Colab provide access to hosted notebooks.\nPart of this popularity comes from the ease of inserting plain text and markdown within and around the code, allowing explanations and a narrative thread to run through the script and aid readability. Cell-based execution allows users to run cells in different orders, examining various elements of the code without any requirement to run the full script. Further, it is simple to export notebooks to shareable HTML or PDF reports; the embedded markdown reduces any requirement for additional processing.\nNotebooks do come with limitations however. While there are tools available for debugging notebooks (e.g. the IPython core debugger), these do not have the functionality available in the native VSCode debugger (or those in similar IDEs). Hence, it is often suggested to export the .ipynb file as a .py script for debugging purposes.\nFurther, a crucial feature of notebooks is that they are saved in JSON format to retain knowledge of the state. The saved version of the notebook retains this state - unlike a Python script which is purely a set of instructions with no state information.\nThe code snippet below (taken from ipython.org) shows an example of how a code cell is stored, with features such as execution count and outputs in addition to the source code.\n{ \"cell_type\" : \"code\", \"execution_count\": 1, # integer or null \"metadata\" : { \"collapsed\" : True, # whether the output of the cell is collapsed \"autoscroll\": False, # any of true, false or \"auto\" }, \"source\" : [\"some code\"], \"outputs\": [{ # list of output dicts (described below) \"output_type\": \"stream\", ... }], } Whilst this feature can be convenient when returning to partially run notebooks, it can introduce issues with version control, a vital part of any collaborative workflow. With no code changes, simply running a cell introduces a change to the underlying JSON. This results in git tracking changes including the running of cells, in addition to any changed code/markdown. Code reviews can get very messy, very quickly.\nWhile there are hacks to get around this, such as saving the file as .Rmd format for version control, it would be great if we could harness some of the positives of notebooks, including the rich markdown features available, without the associated version control issues. Fortunately we can(!) since VSCode supports running of .py files as notebooks in the interactive window, including markdown.\nRunning a .py script as a notebook The following has been tested in Visual Studio Code Version 1.61.1.\nTo run .py content as notebook cells, we first need to install the ipykernel package.\nWithin the script itself, we prefix sections of code with # %% and this allows us to simply run code in sections, with output displayed in the interactive window, much like in a Jupyter notebook.\nBut we can also create a markdown cell, using # %% [markdown] and surrounding markdown content with ‚Äò‚Äô‚Äôtriple quotes‚Äô‚Äô‚Äô.\nTo export content displayed in the interactive window to HTML, we require the nbconvert package. Once this is installed, simply click ‚ÄòExport‚Äô in the interactive window and all displayed output will be exported to a HTML file. It is worth clearing output in the interactive window and rerunning all cells in order, as the exported output will be the contents of the interactive window, not the raw code and markdown chunks contained in the Python script.\nSince all cell and markdown information is contained within comments, and the file exists as a Python script, we experience none of the complications with version control as seen for notebooks. And of course, the script can easily be debugged using standard IDE debugging tools. Overall there are advantages and disadvantages to each method, depending on your goals, but in many contexts the integrated markdown approach provides enough text markup functionality without losing robust version control and debugging tools.\n","wordCount":"823","inLanguage":"en","datePublished":"2022-11-16T13:06:11Z","dateModified":"2022-11-16T13:06:11Z","author":{"@type":"Person","name":"Hollie"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://holliejohnson.github.io/posts/python-markdown/"},"publisher":{"@type":"Organization","name":"Hollie Johnson","logo":{"@type":"ImageObject","url":"https://holliejohnson.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://holliejohnson.github.io/ accesskey=h title="Hollie Johnson (Alt + H)">Hollie Johnson</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://holliejohnson.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://holliejohnson.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://holliejohnson.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://holliejohnson.github.io/posts/>Posts</a></div><h1 class=post-title>Easy markdown in python scripts üêç</h1><div class=post-meta><span title='2022-11-16 13:06:11 +0000 UTC'>November 16, 2022</span>&nbsp;¬∑&nbsp;Hollie</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#jupyter-ipynb-notebooks aria-label="Jupyter (.ipynb) notebooks">Jupyter (<code>.ipynb</code>) notebooks</a></li><li><a href=#running-a-py-script-as-a-notebook aria-label="Running a .py script as a notebook">Running a <code>.py</code> script as a notebook</a></li></ul></div></details></div><div class=post-content><p>Markdown is a popular, lightweight markup language commonly used for text formatting (and used in this site). Whilst markdown can be written in a standalone file (for example, a <code>README.md</code>), it is also used in R Markdown (<code>.Rmd</code>) files and Jupyter (IPython) notebooks (<code>.ipynb</code>). In this blog post, we look at the advantages and disadvantages of notebooks and how we can use markdown directly in standard <code>.py</code> Python scripts.</p><p>As an aside, R Markdown has other advantages over plain markdown, such as being publishable into R bookdown format&mldr; But that&rsquo;s a blog post for another time!</p><hr><p><strong>IPython or Jupyter?</strong></p><p>IPython refers primarily to the interactive shell on which notebooks themselves run. <a href=https://blog.jupyter.org/the-big-split-9d7b88a031a7>As of 2014</a>, several language-agnostic elements of the IPython ecosystem including notebooks were relaunched as Project Jupyter. So sometimes we see Jupyter notebooks still referred to as IPython notebooks - these names refer to the same tool (and they still use the same <code>.ipynb</code> file extension)!</p><hr><h3 id=jupyter-ipynb-notebooks>Jupyter (<code>.ipynb</code>) notebooks<a hidden class=anchor aria-hidden=true href=#jupyter-ipynb-notebooks>#</a></h3><p>Jupyter notebooks are a very popular way of presenting and developing Python code, particularly in exploratory data analysis and educational settings; both <a href=https://kaggle.com>kaggle</a> and <a href=https://colab.research.google.com>Google Colab</a> provide access to hosted notebooks.</p><p>Part of this popularity comes from the ease of inserting plain text and markdown within and around the code, allowing explanations and a narrative thread to run through the script and aid readability. Cell-based execution allows users to run cells in different orders, examining various elements of the code without any requirement to run the full script. Further, it is simple to export notebooks to shareable HTML or PDF reports; the embedded markdown reduces any requirement for additional processing.</p><p>Notebooks do come with limitations however. While there are tools available for debugging notebooks (e.g. the <a href=https://ipython.readthedocs.io/en/stable/api/generated/IPython.core.debugger.html>IPython core debugger</a>), these do not have the functionality available in the native VSCode debugger (or those in similar IDEs). Hence, it is often suggested to export the <code>.ipynb</code> file as a <code>.py</code> script for debugging purposes.</p><p><img loading=lazy src=/img/jupyter.png alt=Jupyter></p><p>Further, a crucial feature of notebooks is that they are saved in <code>JSON</code> format to retain knowledge of the state. The saved version of the notebook retains this state - unlike a Python script which is purely a set of instructions with no state information.</p><p>The code snippet below (taken from <a href=https://ipython.org/ipython-doc/3/notebook/nbformat.html>ipython.org</a>) shows an example of how a code cell is stored, with features such as execution count and outputs in addition to the source code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;cell_type&#34;</span> : <span style=color:#e6db74>&#34;code&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;execution_count&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>integer</span> <span style=color:#960050;background-color:#1e0010>or</span> <span style=color:#960050;background-color:#1e0010>null</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;metadata&#34;</span> : {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;collapsed&#34;</span> : <span style=color:#960050;background-color:#1e0010>True</span>, <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>whether</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>output</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>cell</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>collapsed</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;autoscroll&#34;</span>: <span style=color:#960050;background-color:#1e0010>False</span>, <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>any</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>true,</span> <span style=color:#960050;background-color:#1e0010>false</span> <span style=color:#960050;background-color:#1e0010>or</span> <span style=color:#f92672>&#34;auto&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;source&#34;</span> : [<span style=color:#e6db74>&#34;some code&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;outputs&#34;</span>: [{
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>list</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>output</span> <span style=color:#960050;background-color:#1e0010>dicts</span> <span style=color:#960050;background-color:#1e0010>(described</span> <span style=color:#960050;background-color:#1e0010>below)</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;output_type&#34;</span>: <span style=color:#e6db74>&#34;stream&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>  }],
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Whilst this feature can be convenient when returning to partially run notebooks, it can introduce issues with version control, a vital part of any collaborative workflow. With no code changes, simply running a cell introduces a change to the underlying JSON. This results in git tracking changes including the running of cells, in addition to any changed code/markdown. Code reviews can get very messy, very quickly.</p><p>While there are hacks to get around this, such as <a href=https://towardsdatascience.com/version-control-with-jupyter-notebooks-f096f4d7035a>saving the file as .Rmd format</a> for version control, it would be great if we could harness some of the positives of notebooks, including the rich markdown features available, without the associated version control issues. Fortunately we can(!) since VSCode supports running of <code>.py</code> files as notebooks in the interactive window, including markdown.</p><hr><h3 id=running-a-py-script-as-a-notebook>Running a <code>.py</code> script as a notebook<a hidden class=anchor aria-hidden=true href=#running-a-py-script-as-a-notebook>#</a></h3><p>The following has been tested in Visual Studio Code Version 1.61.1.</p><p>To run <code>.py</code> content as notebook cells, we first need to install the <code>ipykernel</code> package.</p><p>Within the script itself, we prefix sections of code with <code># %%</code> and this allows us to simply run code in sections, with output displayed in the interactive window, much like in a Jupyter notebook.</p><p><img loading=lazy src=/img/code_cells.png alt="Code cells"></p><p>But we can also create a markdown cell, using <code># %% [markdown]</code> and surrounding markdown content with <code>‚Äò‚Äô‚Äôtriple quotes‚Äô‚Äô‚Äô</code>.</p><p><img loading=lazy src=/img/md_cells.png alt="Markdown cells"></p><p>To export content displayed in the interactive window to HTML, we require the <code>nbconvert</code> package. Once this is installed, simply click &lsquo;Export&rsquo; in the interactive window and all displayed output will be exported to a HTML file. It is worth clearing output in the interactive window and rerunning all cells in order, as the exported output will be the contents of the interactive window, <strong>not</strong> the raw code and markdown chunks contained in the Python script.</p><p>Since all cell and markdown information is contained within comments, and the file exists as a Python script, we experience none of the complications with version control as seen for notebooks. And of course, the script can easily be debugged using standard IDE debugging tools. Overall there are advantages and disadvantages to each method, depending on your goals, but in many contexts the integrated markdown approach provides enough text markup functionality without losing robust version control and debugging tools.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://holliejohnson.github.io/tags/vscode/>vscode</a></li><li><a href=https://holliejohnson.github.io/tags/markdown/>markdown</a></li><li><a href=https://holliejohnson.github.io/tags/python/>python</a></li></ul><nav class=paginav><a class=next href=https://holliejohnson.github.io/posts/today-i-learned/><span class=title>Next ¬ª</span><br><span>TIL: Building a simple site using Hugo</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://holliejohnson.github.io/>Hollie Johnson</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>